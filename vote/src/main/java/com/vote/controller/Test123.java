package com.vote.controller;

import com.alibaba.fastjson.JSONArray;
import com.alibaba.fastjson.JSONObject;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.ResponseBody;

import javax.servlet.http.HttpServletResponse;

/**
 * Created by MonkeyHu on 2017/8/26.
 */
@Controller
@RequestMapping("/test123")
public class Test123 {

    @RequestMapping("/test")
    @ResponseBody
    public JSONObject test123(HttpServletResponse response)throws Exception{

        String str =
                "#1,01,0228,0389,081906.000,260817,3413.7125,10858.4575\n" +


                        "#1,01,0226,0389,081919.000,260817,3413.7128,10858.4575\n" +


                        "#1,01,0228,0389,081933.000,260817,3413.7142,10858.4577\n" +


                        "#1,01,0228,0389,081946.000,260817,3413.7154,10858.4581\n" +


                        "#1,01,0226,0389,082000.000,260817,3413.7166,10858.4584\n" +


                        "#1,01,0228,0389,082014.000,260817,3413.7177,10858.4589\n" +


                        "#1,01,0228,0389,082027.000,260817,3413.7181,10858.4602\n" +


                        "#1,01,0226,0389,082041.000,260817,3413.7199,10858.4602\n" +


                        "#1,01,0226,0389,082053.000,260817,3413.7202,10858.4606\n" +


                        "#1,01,0228,0389,082108.000,260817,3413.7181,10858.4612\n" +


                        "#1,01,0228,0389,082120.000,260817,3413.7192,10858.4611\n" +


                        "#1,01,0226,0389,082135.000,260817,3413.7207,10858.4619\n" +


                        "#1,01,0226,0389,082148.000,260817,3413.7210,10858.4625\n" +


                        "#1,01,0228,0389,082202.000,260817,3413.7216,10858.4619\n" +


                        "#1,01,0228,0389,082215.000,260817,3413.7220,10858.4613\n" +


                        "#1,01,0228,0389,082229.000,260817,3413.7226,10858.4605\n" +


                        "#1,01,0226,0412,082242.000,260817,3413.7234,10858.4598\n" +


                        "#1,01,0226,0412,082256.000,260817,3413.7231,10858.4598\n" +


                        "#1,01,0226,0412,082309.000,260817,3413.7230,10858.4598\n" +


                        "#1,01,0226,0389,082323.000,260817,3413.7229,10858.4598\n" +


                        "#1,01,0226,0412,082337.000,260817,3413.7228,10858.4598\n" +


                        "#1,01,0228,0412,082350.000,260817,3413.7227,10858.4598\n" +


                        "#1,01,0226,0412,082404.000,260817,3413.7227,10858.4598\n" +


                        "#1,01,0226,0389,082416.000,260817,3413.7227,10858.4598\n" +


                        "#1,01,0226,0412,082428.000,260817,3413.7226,10858.4598\n" +


                        "#1,01,0226,0412,082443.000,260817,3413.7226,10858.4598\n" +


                        "#1,01,0226,0412,082457.000,260817,3413.7225,10858.4598\n" +


                        "#1,01,0226,0412,082511.000,260817,3413.7224,10858.4598\n" +


                        "#1,01,0226,0412,082524.000,260817,3413.7222,10858.4598\n" +


                        "#1,01,0226,0412,082538.000,260817,3413.7220,10858.4598\n" +


                        "#1,01,0228,0412,082551.000,260817,3413.7220,10858.4598\n" +


                        "#1,01,0226,0412,082604.000,260817,3413.7219,10858.4598\n" +


                        "#1,01,0226,0412,082617.000,260817,3413.7219,10858.4598\n" +


                        "#1,01,0226,0412,082632.000,260817,3413.7220,10858.4598\n" +


                        "#1,01,0226,0412,082644.000,260817,3413.7220,10858.4598\n" +


                        "#1,01,0226,0412,082658.000,260817,3413.7220,10858.4598";
        JSONObject jsonObject = new JSONObject();
        String strs[] = str.split("\n");
        JSONArray jsonArray = new JSONArray();
        for (int i = 0;i<strs.length;i++){
            String []datas = strs[i].split(",");
            JSONObject object = new JSONObject();
            object.put("nid",datas[1]);
            object.put("electric",datas[2]);
            object.put("temperature",datas[3]);
            object.put("date",datas[4]);
            object.put("savedate",datas[5]);
            object.put("latitude",datas[6]);
            object.put("altitude",datas[7]);
            jsonArray.add(object);
        }
        jsonObject.put("mes",jsonArray);
        return jsonObject;
    }
}
